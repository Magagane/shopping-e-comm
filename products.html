<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products Details</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css">

</head>
<body>
      <nav>
        <div class="hamburger-menu">
            <i class='bx bx-menu'></i>
        </div>
        <ul class="nav-links">
            <li><a href="index.html"><i class='bx bx-home'></i></a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="about-us.html">About Us</a></li>
            <li><a href="contact-us.html">Contact Us</a></li>
            <li><a href="cart.html"><i class='bx bx-cart'></i><span id="cart-count">0</span></a></li>
     </ul>
     <ul class="auth-links">
        <li><a href="login.html">Login</a></li>
        <li><a href="register.html">Register</a></li>
     </ul>
    </nav>  
    <div id="product-grid"></div>
    <script>
        let cart=JSON.parse(localStorage.getItem('cart'))||[];

        function addToCart(product){
            console.log('Add to Cart button clicked');
            const existingProduct=cart.find((item)=>item.id===product.id);
            if(existingProduct){
                alert(`Product"${product.name}" is already in your cart.`);
                window.location.href='cart.html';
                return;
            }
            cart.push(product);
            updateCartCount();
            localStorage.setItem('cart',JSON.stringify(cart));
           window.location.href='cart.html';
        }
        function updateCartCount(){
            //console.log('Updating cart coun to:',cart.length);
            //const cartCountElement=document.querySelector('#cart-count');
            document.getElementById('cart-count').innerText=cart.length;
           /*artCountElement){
                cartCountElement.textContent=cart.length;
                console.log('Cart count updated to:',cart.length);
           }else{
                console.error('Cart count element not found');
            }*/
        }
        function showSuccessMessage(message){
            const successMessageElement=document.createElement('div');
            successMessageElement.textContent=message;

            successMessageElement.classList.add('success-message');

            document.body.appendChild(successMessageElement);
            setTimeout(()=>{
                successMessageElement.remove();
            },2000);
        }
        fetch('products.json')
        .then(response=>response.json())
        .then(data=>{
            const productGrid=document.getElementById('product-grid');
            data.forEach(product=>{
                const productCard=document.createElement('div');

                productCard.classList.add('product-card')
                productCard.innerHTML=`<img src="${product.image}" alt="${product.name}"> <h2>${product.name}</h2> <p>${product.description}</p> <p>$${product.price}</p>
             <button class="add-to-cart" data-id="${product.id}" data-name="${product.name}" data-price="${product.price}"
              data-image="${product.image}">Add to Cart</button>`;
                productGrid.appendChild(productCard);
            });
            const addToCartButtons=document.querySelectorAll('.add-to-cart');
            addToCartButtons.forEach(button=>{
                button.addEventListener('click',()=>{
                    const product={
                        id:button.getAttribute('data-id'),
                        name:button.getAttribute('data-name'),
                        price:button.getAttribute('data-price'),
                        image:button.getAttribute('data-image')
                    };
                    addToCart(product);
                });
            });
            document.getElementById('cart-count').innerText=cart.length;
        })
        .catch(error=>console.error('Error:',error));
        
        
    </script>
</body>
</html>